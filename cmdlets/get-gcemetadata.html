<!DOCTYPE html>
<html class="google" lang="en">
  <head>
    <meta charset="utf-8">
    <script>
        (function(H){H.className=H.className.replace(/\bgoogle\b/,'google-js')})(document.documentElement)
    </script>
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">
    <meta name="description" content="">

    <link rel="shortcut icon" href="https://cloud.google.com/images/gcp-favicon.ico">

    <title>Get-GceMetadata</title>
    <script src="//www.google.com/js/google.js"></script>
    <link rel="canonical" href="http://googlecloudplatform.github.io/google-cloud-powershell/cmdlets/get-gcemetadata.html">
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en">
    <link rel="stylesheet" href="//www.google.com/css/maia.css">
</head>

  <body>
    <header>
    <div class="maia-header" id="maia-header" role="banner">
        <div class="maia-aux">
            <a href="/google-cloud-powershell/">
                <h1>
                    <img alt="Google" src="//www.google.com/images/branding/googlelogo/1x/googlelogo_color_116x41dp.png">&nbsp;Cloud Platform
                </h1>
                <h2>
                    PowerShell
                </h2>
            </a>
        </div>
    </div>
</header>

    
    <div class="maia-nav" id="maia-nav-x" role="navigation">
      <div class="maia-aux">
        <ul>
          <li>
            <a href="/google-cloud-powershell/">Home</a>
          </li>

          <li
              >
            <a href="/google-cloud-powershell/cmdlets/">Reference</a>
          </li>

          <!-- cmdlet-specific pages include the parent product. -->
          
          <li class="active">
            <a href="/google-cloud-powershell/cmdlets/google-compute-engine">Google Compute Engine</a>
          </li>
          

          <!-- product-specific pages. -->
          
        </ul>
      </div>
    </div>
    
    <div id="maia-main" role="main">
      <div class="maia-teleport" id="content">
      <style>
pre {
    white-space: pre-wrap;
}
</style>

<h1>Get-GceMetadata</h1>
<pre>
NAME
    Get-GceMetadata
    
SYNOPSIS
    Gets the current metadata from the metadata server.
    
SYNTAX
    Get-GceMetadata [-Path &lt;string&gt;] [-Recurse &lt;SwitchParameter&gt;] [-AppendETag &lt;SwitchParameter&gt;] [-WaitUpdate &lt;SwitchParameter&gt;] [-LastETag &lt;string&gt;] [-Timeout &lt;TimeSpan&gt;] [&lt;CommonParameters&gt;]
    
    
DESCRIPTION
    Gets the current metadata from the metadata server. Get-GceMetadata can only be called from a Google Compute Engine VM instance. Calls from any other machine will fail.
    

PARAMETERS
    -Path &lt;string&gt;
        The path to the specific metadata you wish to get e.g. &quot;instance/tags&quot;, &quot;instance/attributes&quot;, &quot;project/attributes/sshKeys&quot;.
        
        Required?                    false
        Position?                    named
        Default value                
        Accept pipeline input?       false
        Accept wildcard characters?  false
        
    -Recurse &lt;SwitchParameter&gt;
        If set, will get the metadata subtree as a JSON string. If -Path is not set, will get the entire metadata tree as a JSON string.
        
        Required?                    false
        Position?                    named
        Default value                False
        Accept pipeline input?       false
        Accept wildcard characters?  false
        
    -AppendETag &lt;SwitchParameter&gt;
        When set, the value of the respone ETag will be appended to the output pipeline after the content.
        
        PS C:\&gt; $metadata, $etag = Get-GceMetadata -AppendETag -Recurse
        
        Gets the entire metadata tree, and the ETag of the version retrieved.
        
        Required?                    false
        Position?                    named
        Default value                False
        Accept pipeline input?       false
        Accept wildcard characters?  false
        
    -WaitUpdate &lt;SwitchParameter&gt;
        If true, the query will wait for the metadata to update.
        
        Required?                    false
        Position?                    named
        Default value                False
        Accept pipeline input?       false
        Accept wildcard characters?  false
        
    -LastETag &lt;string&gt;
        The last ETag known. Used in conjunction with -WaitUpdate. If the last ETag does not match the current ETag of the metadata server, it will return the updated value immediatly.
        
        Required?                    false
        Position?                    named
        Default value                
        Accept pipeline input?       false
        Accept wildcard characters?  false
        
    -Timeout &lt;TimeSpan&gt;
        Used in conjunction with -WaitUpdate. The amout of time to wait. If the timeout expires, the current metadata will be returned.
        
        Check the ETag using AppendEtag to see if the data was updated within the timeout period.
        
        Required?                    false
        Position?                    named
        Default value                
        Accept pipeline input?       false
        Accept wildcard characters?  false
        
    &lt;CommonParameters&gt;
        This cmdlet supports the common parameters: Verbose, Debug,
        ErrorAction, ErrorVariable, WarningAction, WarningVariable,
        OutBuffer, PipelineVariable, and OutVariable. For more information, see 
        about_CommonParameters (http://go.microsoft.com/fwlink/?LinkID=113216). 
    
INPUTS
    
OUTPUTS
    System.String
    
    
    ----------  EXAMPLE 1  ----------
    
    PS C:\&gt; $allMetadata = Get-GceMetadata -Recurse | ConvertFrom-Json
    
    
    Gets all of the metadata and converts it from the given JSON to a PSCustomObject.
    
    ----------  EXAMPLE 2  ----------
    
    PS C:\&gt; $hostName = Get-GceMetadata -Path &quot;instance/hostname&quot;
    
    
    Gets the hostname of the instance.
    
    ----------  EXAMPLE 3  ----------
    
    PS C:\&gt; $customProjectMetadata = Get-GceMetadata -Path &quot;project/attributes/customKey&quot;
    
    
    Gets the value of the custom metadata with key &quot;customKey&quot; placed in the project .
    
    ----------  EXAMPLE 4  ----------
    
    PS C:\&gt; $metadata, $etag = Get-GceMetadata -AppendETag -Recurse
    
    
    Gets the entire metadata tree, and the ETag of the version retrieved.
    
    ----------  EXAMPLE 5  ----------
    
    PS C:\&gt; $newTags, $newEtag = Get-GceMetadata -Path &quot;instance/tags&quot; -AppendETag -WaitUpdate `
                                    -LastETag $oldETag
    
    
    Waits for the metadata &quot;instance/tags&quot; to be updated by the server.
    
    
RELATED LINKS
    [Metadata Documentation] (https://cloud.google.com/compute/docs/storing-retrieving-metadata)



</pre>

      </div>
    </div>
    <footer>
    <div id="maia-signature"></div>
        <div class="maia-footer" id="maia-footer">
            <div id="maia-footer-global">
                <div class="maia-aux">
                <ul>
                    <li>
                        <a href="//www.google.com/">Google</a>
                    </li>
                    <li>
                        <a href="//www.google.com/intl/en/about/">About Google</a>
                    </li>
                    <li>
                        <a href="//www.google.com/intl/en/policies/privacy/">Privacy</a>
                    </li>
                    <li>
                        <a href="//www.google.com/intl/en/policies/terms/">Terms</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script src="//www.google.com/js/maia.js">
    </script>
</body>
</html>
